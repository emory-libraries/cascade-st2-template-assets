function utilitySlider(){var a=$(".utilities li").width();$(".utilities").bxSlider({slideWidth:a,minSlides:1,maxSlides:8,slideMargin:0,infiniteLoop:true,pager:false,nextText:">",prevText:"<"});if($(".today-hours").length>0){hoursComponent("slider")}}function bookSlider(){var a=$(".books-slider li").width();$(".books-slider").bxSlider({slideWidth:a,randomStart:true,captions:false,auto:true,autoHover:true,autoDelay:3000,minSlides:1,slideMargin:0,infiniteLoop:true,pager:false,pause:5000,speed:500,nextText:">",prevText:"<"})}function typeaheadSetup(){var c,b,a;c=$("#library_q.ajax_typeahead");if(c.length>0){b=$("#hero-search-databases").data("url");a=b.indexOf("?")==-1?"?":"&";b=b+a;c.typeahead({name:"databases",limit:100,prefetch:{url:b,filter:function(d){var e=[];if(d.RES!==undefined){e=getTypeaheadDatabase(d,b)}return e}},remote:{url:b+"q=%QUERY",filter:function(d){var e=[];if(d.RES!==undefined){e=getTypeaheadDatabase(d,b)}return e}},template:['<p class="ta-h1">{{value}}</p>'].join(""),engine:Hogan});c.on("typeahead:selected",function(e,d){window.location=d.redirect_url});if($(".big-search.database-search.database-page").length===0){$(".twitter-typeahead").css("width","103%")}else{if($(".big-search.database-search.database-page").length>0){$(".twitter-typeahead").addClass("span10")}}$(".tt-hint").addClass("input span12");$(".tt-query").css("width","100%");if(Modernizr.mq("screen and (max-width:767px)")){$(".tt-hint").css("width","100%")}}}function getTypeaheadDatabase(b,a){var c=[];if(b.RES.M==1){$.each(b.RES.R.MT,function(d,e){if(e["@attributes"].N=="full_title"){b.RES.R.T=e["@attributes"].V}});$.each(b.RES.R.MT,function(d,e){if(e["@attributes"].N=="full_description"){b.RES.R.S=e["@attributes"].V}});$.each(b.RES.R.MT,function(d,e){if(e["@attributes"].N=="external_link"){b.RES.R.U=e["@attributes"].V}});b.RES.R.combined=b.RES.R.T;c.push({name:b.RES.R.T,description:b.RES.R.S,language:"en",value:b.RES.R.combined,redirect_url:b.RES.R.U,tokens:b.RES.R.T})}else{if(b.RES.M>1){for(i=0;i<b.RES.R.length;i++){$.each(b.RES.R[i].MT,function(d,e){if(e["@attributes"].N=="full_title"){b.RES.R[i].T=e["@attributes"].V}});$.each(b.RES.R[i].MT,function(d,e){if(e["@attributes"].N=="full_description"){b.RES.R[i].S=e["@attributes"].V}});$.each(b.RES.R[i].MT,function(d,e){if(e["@attributes"].N=="external_link"){b.RES.R[i].U=e["@attributes"].V}});b.RES.R[i].combined=b.RES.R[i].T;c.push({name:b.RES.R[i].T,description:b.RES.R[i].S,language:"en",value:b.RES.R[i].combined,redirect_url:b.RES.R[i].U,tokens:b.RES.R[i].T})}}}return c}$(function(){typeaheadSetup()});$(document).ready(function(){if($("#form-library-search").length>0){$("#form-library-search").librarySearch({search_field:$("#library_q"),size:"large"})}if($(".utilities").length>0){utilitySlider()}if($(".books-slider").length>0){bookSlider()}});